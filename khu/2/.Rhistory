<<<<<<< HEAD
recipe(PersonalLoan ~ ., data = raw.train) %>%
step_center(all_predictors(), -all_outcomes()) %>%
step_scale(all_predictors(), -all_outcomes()) %>%
prep()
raw.rec
# Data Recipe
#
# Inputs:
#
#       role #variables
#    outcome          1
#  predictor         13
#
# Training data contained 3500 data points and no missing data.
#
# Operations:
#
# Box-Cox transformation on ID, Age, Income [trained]
# Centering and scaling for ID, Age, Experience, Income, ... [trained]
# Correlation filter removed Age [trained]
# Centering for ID, Experience, Income, ZIPCode, ... [trained]
# Scaling for ID, Experience, Income, ZIPCode, ... [trained]
raw.rec %>% juice() -> rec.train # 훈련 데이터 처리
raw.rec %>% bake(raw.test) -> rec.test # 테스트 데이터 처리
parsnip::rand_forest(trees = 100, mode = "classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
raw.rf
# 결과 확인
raw.rf %>% predict(rec.test)
# 결과 확인
raw.rf %>% predict(rec.test) %>%
bind_cols(rec.test)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.pred)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.pred)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test)
rec.train
rec.train %>% select(PersonalLoan)
raw.rec
raw %>% select(PersonalLoan)
raw.rf %>%
predict(rec.test)
raw.rf %>%
predict(rec.test) %>%
bind_cols(rec.test) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
rec.test %>% select(PersonalLoan)
rec.test %>% select(PersonalLoan) -> truth
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
mutate(obs = PersonalLoan,
pred = .pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) -> conf.nat.data
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
raw.rec <-
recipe(PersonalLoan ~ ., data = raw.train) %>%
step_center(all_predictors(), -all_outcomes()) %>%
step_scale(all_predictors(), -all_outcomes()) %>%
prep()
raw.rec
# Data Recipe
#
# Inputs:
#
#       role #variables
#    outcome          1
#  predictor         13
#
# Training data contained 3500 data points and no missing data.
#
# Operations:
#
# Box-Cox transformation on ID, Age, Income [trained]
# Centering and scaling for ID, Age, Experience, Income, ... [trained]
# Correlation filter removed Age [trained]
# Centering for ID, Experience, Income, ZIPCode, ... [trained]
# Scaling for ID, Experience, Income, ZIPCode, ... [trained]
raw.rec %>% juice() -> rec.train # 훈련 데이터 처리
raw.rec %>% bake(raw.test) -> rec.test # 테스트 데이터 처리
parsnip::rand_forest(trees = 100, mode = "classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
# 결과 확인
raw.rf %>% predict(rec.test) %>%
bind_cols(rec.test)
# # A tibble: 1,500 x 15
#    .pred_class    ID    Age Experience Income ZIPCode Family   CCAvg
#    <fct>       <dbl>  <dbl>      <dbl>  <dbl>   <dbl>  <dbl>   <dbl>
#  1 0           -1.73 -0.562     -0.454 -1.35   0.697  -1.22  -0.530
#  2 0           -1.73 -0.912     -0.977  0.592  0.427  -1.22   0.462
#  3 0           -1.73 -0.737     -0.629 -0.961 -0.456   1.40  -0.880
#  4 0           -1.73  0.399      0.331 -1.11   0.352  -1.22  -0.939
#  5 0           -1.73 -0.912     -0.890  0.176 -1.36    0.529 -0.764
#  6 0           -1.73  1.88       1.81   0.854 -0.625  -1.22   0.0531
#  7 0           -1.72 -1.44      -1.33  -0.239 -1.28   -1.22  -0.414
#  8 0           -1.72 -0.126     -0.193 -0.655 -0.812  -0.345 -0.705
#  9 0           -1.71  1.19       1.29  -0.829 -0.0192 -1.22  -0.414
# 10 0           -1.71  0.661      0.680 -0.698  0.733  -0.345 -0.764
# # … with 1,490 more rows, and 7 more variables: Education <dbl>,
# #   Mortgage <dbl>, SecuritiesAccount <dbl>, CDAccount <dbl>,
# #   Online <dbl>, CreditCard <dbl>, PersonalLoan <fct>
rec.test %>% select(PersonalLoan) -> truth
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
# # A tibble: 2 x 3
#   .metric  .estimator .estimate
#   <chr>    <chr>          <dbl>
# 1 accuracy binary         0.895
# 2 kap      binary         0
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
raw.rec %>% juice() -> rec.train # 훈련 데이터 처리
raw.rec %>% bake(raw.test) -> rec.test # 테스트 데이터 처리
parsnip::rand_forest(trees = 100, mode = "classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
raw.rf %>% predict(rec.test) %>%
bind_cols(rec.test)
rec.test %>% select(PersonalLoan) -> truth
# 결과 확인
raw.rf %>% predict(rec.test) %>%
bind_cols(truth)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
# 랜덤포레스트 with Tidymodels
raw.rec <-
recipe(PersonalLoan ~ ., data = raw.train) %>%
prep()
raw.rec
raw.rec %>% juice() -> rec.train # 훈련 데이터 처리
raw.rec %>% bake(raw.test) -> rec.test # 테스트 데이터 처리
parsnip::rand_forest(trees = 100, mode = "classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
rec.test %>% select(PersonalLoan) -> truth
# 결과 확인
raw.rf %>% predict(rec.test) %>%
bind_cols(truth)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred) %>%
ggplot2::autoplot(type = "heatmap")
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_auc()
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_auc(obs, pred)
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, pred)
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, pred) %>
two_class_example
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, 0)
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, "0")
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, "1")
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_curve(obs, Class1)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class)
two_class_example
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) -> data
roc_curve(data)
roc_curve(data, obs, pred)
roc_curve(data, obs, estimate = pred)
roc_curve(data, obs, estimate = .0)
roc_curve(data, obs, estimate = .pred_class)
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
roc_curve(data, PersonalLoan, estimate = .pred_class)
# ROC 커브
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
roc_curve(PersonalLoan, estimate = .pred_class)
# 시각화
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred) %>%
ggplot2::autoplot(type = "heatmap")
measure_importance(raw.rf$fit)
pacman::p_load(tidyverse, magrittr, # helper packages
tidymodels, rstatix, randomForest, randomForestExplainer,# modeling packages
ggpubr) #  visualization
randomForestExplainer::measure_importance(raw.rf$fit)
measure_importance(raw.rf$fit) %>%
as_tibble() %>%
mutate(imp=node_purity_increase*100/max(node_purity_increase)) %>%
arrange(-imp) %>%
select(variable, imp)
measure_importance(raw.rf$fit) %>%
as_tibble()
read_csv("UniversalBank.csv") -> raw
raw %>% glimpse()
raw %<>%
mutate(PersonalLoan = as.factor(PersonalLoan)) # 종속변수 팩터화
# 데이터 분할 ----------------------------------------------
set.seed(123)
raw.split <- rsample::initial_split(raw , strata = PersonalLoan,
prop = 0.70)
raw.train <- training(raw.split) # Analysis를 학습으로 적재
raw.test  <-  testing(raw.split) # Assess를 테스트로 적재
raw.train %>%  skimr::skim()
# 랜덤포레스트 with Tidymodels
parsnip::rand_forest(trees = 1000, min_n = tune()) %>%
set_mode("classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
# 결과 확인
raw.rf %>% predict(rec.test) %>%
bind_cols(truth)
rec.test %>% select(PersonalLoan) -> truth
raw.test %>% select(PersonalLoan) -> truth
# 결과 확인
raw.rf %>% predict(raw.test) %>%
bind_cols(truth)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
# 랜덤포레스트 with Tidymodels
parsnip::rand_forest(trees = 1000, min_n = tune()) %>%
set_mode("classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
raw.test %>% select(PersonalLoan) -> truth
# 결과 확인
raw.rf %>% predict(raw.test) %>%
bind_cols(truth)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
# 랜덤포레스트 with Tidymodels
parsnip::rand_forest(trees = 1000) %>%
set_mode("classification") %>%
set_engine("randomForest") %>%
fit(PersonalLoan ~ ., data = raw.train) -> raw.rf
raw.rf %>% predict(raw.test)
# 결과 확인
raw.rf %>% predict(raw.test) %>%
bind_cols(truth)
raw.test %>% select(PersonalLoan) -> truth
# 결과 확인
raw.rf %>% predict(raw.test) %>%
bind_cols(truth)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
metrics(truth=PersonalLoan, estimate=.pred_class)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred)
# 혼동행렬 시각화
raw.rf %>%
predict(rec.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred) %>%
ggplot2::autoplot(type = "heatmap")
# 혼동행렬 시각화
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(obs, pred) %>%
ggplot2::autoplot(type = "heatmap")
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(truth = obs, estimate = pred)
raw.rf %>%
predict(raw.test)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(truth = obs, estimate = pred)
roc_auc(truth = obs, 0)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_auc(obs, 0)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_auc(obs, 1)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
roc_auc(obs, 0)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = as.factor(PersonalLoan),
pred = as.factor(.pred_class))
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = as.factor(PersonalLoan),
pred = as.factor(.pred_class))
raw.rf %>%
predict(raw.test)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = factor(PersonalLoan),
pred = .pred_class) %>%
conf_mat(truth = obs, estimate = pred)
raw.rf
raw.rf %>%
predict(raw.test)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth)
conf_mat(truth = obs, estimate = pred)
raw.rf %>%
predict(raw.test) %>%
bind_cols(truth) %>%
rename(obs = PersonalLoan,
pred = .pred_class) %>%
conf_mat(truth = obs, estimate = pred)
two_class_example
# 랜덤포레스트 with Tidymodels
p = ncol(raw.train) - 1 # class 뺀 X변수들의 숫자
n = nrow(raw.train)
mtry = floor(seq(0.1, 1, by = 0.1) * p)
nsize = round(c(1, n * seq(0.01, 0.1, by = 0.01)))
pna = matrix(NA, nrow = length(mtry), ncol = length(nsize))
pnadf = data.frame()
for( i in 1:length(mtry)){
for( j in 1:length(nsize)){
m = mtry[i]
n = nsize[j]
rf = randomForest(target_class~.,
data = train, ntree = 100, mtry = m,
nodesize = n, set.seed(0226))
pred = predict(rf, newdata = test, type = 'prob')
roccurve0 = roc(test$target_class ~ pred[,2])
auc = roccurve0$auc %>% as.numeric()
pna[i,j] = auc
pnadf = rbind(pnadf, c(m,n,auc))
}
}
m
for( i in 1:length(mtry)){
for( j in 1:length(nsize)){
m = mtry[i]
n = nsize[j]
rf = randomForest(target_class~.,
data = train, ntree = 100, mtry = m,
nodesize = n, set.seed(0226))
pred = predict(rf, newdata = test, type = 'prob')
roccurve0 = roc(test$target_class ~ pred[,2])
auc = roccurve0$auc %>% as.numeric()
pna[i,j] = auc
pnadf = rbind(pnadf, c(m,n,auc))
}
}
=======
data(Adult)
Adults %>%
apriori(parameter = list(suppor = 0.001,
confidence = 0.5)) -> Adults_rules
data(Adult)
Adult %>%
apriori(parameter = list(suppor = 0.001,
confidence = 0.5)) -> Adult_rules
Adult_rules %>%
sort(by = "lift") %>%
head(10) -> Adult_subrules
Adult_rules
plot(Adult_subrules,
method = "graph",
control = list(type = "items"))
Adult %>%
apriori(parameter = list(support = 0.1,
confidence = 0.6)) -> Adult_rules
Adult_rules %>%
sort(by = "lift") %>%
head(10) -> Adult_subrules
plot(Adult_subrules,
method = "graph",
control = list(type = "items"))
Groceries %>%
apriori(parameter = list(support = 0.001,
confidence = 0.5)) -> rules
rules %>%
sort(by = "lift") %>%
head(10) -> subrules
plot(subrules,
method = "graph",
control = list(type = "items"))
# 2.1. 데이터 탐색: Adult
data(Adult)
Adult %>%
apriori(parameter = list(support = 0.1,
confidence = 0.6)) -> Adult_rules
Adult_rules %>%
sort(by = "lift") %>%
head(10) -> Adult_subrules
plot(Adult_subrules,
method = "graph",
control = list(type = "items"))
Adult %>%
apriori(parameter = list(support = 0.1,
confidence = 0.6),
appearance = list(rhs = c("income = small",
"income = large"),
default = "lhs"),
control = list(verbose = F)) -> Adult_rules
Adult_rules %>%
sort(by = "lift") %>%
head(10) -> Adult_subrules
plot(Adult_subrules,
method = "graph",
control = list(type = "items"))
Adult_rules %>%
sort(by = "lift") -> Adult_subrules
plot(Adult_subrules,
method = "graph",
control = list(type = "items"))
plot(Adult_subrules,
method = "scatterplot",
control = list(type = "items"))
plot(Adult_subrules,
method = "graph",
control = list(type = "items", alpha = 0.5))
Adult_rules %>%
sort(by = "lift") %>%
head(100)-> Adult_subrules
plot(Adult_subrules,
method = "scatterplot",
control = list(type = "items"))
plot(Adult_subrules,
method = "graph",
control = list(type = "items", alpha = 0.5))
plot(Adult_subrules,
method = "scatterplot",
control = list(type = "items"))
Adult_rules %>%
sort(by = "lift") -> Adult_subrules
plot(Adult_subrules,
method = "scatterplot",
control = list(type = "items"))
plot(Adult_subrules,
method = "graph",
control = list(type = "items", alpha = 0.5))
rm(list = ls)
rm(list = ls())
pacman::p_load(tidyverse, magrittr, # helper packages
tidymodels, tidygraph # modeling packages
)
pacman::p_load(tidyverse, magrittr, # helper packages
sna # modeling packages
)
rbind(
c(0,1,1,1,0),
c(1,0,0,1,0),
c(1,0,0,0,0),
c(1,1,0,0,1),
c(0,0,0,1,0)
) -> amatrix
sna::gden(amatrix)
degree(amatrix, gmode = "graph")
closeness(amatrix, gmode = "graph")
betweenness(amatrix, gmode = "graph")
gplot(amatrix)
gplot(amatrix, mode = "circle")
plot.sociomatrix(amatrix)
rbind(
c(0,1,1,1,0),
c(1,0,0,0,0),
c(1,0,0,0,0),
c(1,1,0,0,1),
c(0,0,0,1,0)
) -> amatrix
sna::gden(amatrix)
degree(amatrix, gmode = "graph")
closeness(amatrix, gmode = "graph")
betweenness(amatrix, gmode = "graph")
gplot(amatrix)
gplot(amatrix, mode = "circle")
plot.sociomatrix(amatrix)
pacman::p_load(tidyverse, magrittr, # helper packages
tsibble # modeling packages
)
USAccDeaths %>% as_tsibble()
tourism
tourism %>%
filter(Purpose == "Holiday") %>%
group_by(State) %>%
summarise(Trips = sum(Trips))
tourism %>%
mutate(Year = lubridate::year(Quarter)) %>%
index_by(Year) %>%
group_by(Region, State, Purpose) %>%
summarise(Trips = sum(Trips)) %>%
ungroup()
pedestrian %>%
mutate(
Day = lubridate::wday(Date, label = TRUE),
Weekend = (Day %in% c("Sun", "Sat"))
) %>%
ggplot(aes(x = Time, y = Count, group = Date)) +
geom_line(aes(col = Weekend)) +
facet_grid(Sensor ~ .)
USAccDeaths
USAccDeaths %>% as_tsibble()
AirPassengers %>%
as_tsibble()
pedestrian %>%
mutate(
Day = lubridate::wday(Date, label = TRUE),
Weekend = (Day %in% c("Sun", "Sat"))
) %>%
ggplot(aes(x = Time, y = Count, group = Date)) +
geom_line(aes(col = Weekend)) +
facet_grid(Sensor ~ .)
pedestrian
tourism
AirPassengers
tourism
tourism %>%
mutate(Year = lubridate::year(Quarter))
AirPassengers
tourism %>%
mutate(Year = lubridate::year(Quarter))
AirPassengers %>%
decompose()
AirPassengers %>%
decompose() %>%
tidy()
AirPassengers %>%
decompose() %>%
as_tibble()
AirPassengers %>%
decompose() %>%
as_tsibble()
AirPassengers %>%
decompose() %>%
unnest(seasonal)
AirPassengers %>%
decompose() -> AirPassengers_decompose
AirPassengers_decompose$seasonal
AirPassengers_decompose_adj <- AirPassengers - AirPassengers_decompose$seasonal
plot(AirPassengers_decompose_adj)
AirPassengers %>%
as_tsibble()
AirPassengers %>%
as_tsibble() %>%
ggplot(aes(x = index, y = value)) +
geom_line(aes(col = index))
AirPassengers %>%
as_tsibble() %>%
ggplot(aes(x = index, y = value)) +
geom_line(aes(col = index)) %>%
facet_grid(Sensor ~ .)
pacman::p_load(tidyverse, magrittr, # helper packages
tsibble, ts # modeling packages
)
pacman::p_load(tidyverse, magrittr, # helper packages
tsibble # modeling packages
)
AirPassengers %>%
ts(frequency = 12) %>%
decompose() %>%
plot()
pacman::p_load(tidyverse, magrittr, # helper packages
tsibble, # modeling packages
tseries, forecast)
AirPassengers %>%
stl(s.window = "periodic")
AirPassengers %>%
stl(s.window = "periodic") %>%
plot()
AirPassengers %>%
ts(frequency = 12) %>%
decompose() %>%
plot()
AirPassengers %>%
stl(s.window = "periodic") %>%
plot()
AirPassengers %>%
ts(frequency = 12) %>%
decompose() %>%
plot()
AirPassengers %>%
stl(s.window = "periodic") %>%
plot()
AirPassengers %>%
log() %>%
diff() %>%
adf.test(alternative = "stationary" k = 0))
AirPassengers %>%
log() %>%
diff() %>%
adf.test(alternative = "stationary", k=0)
AirPassengers %>%
log() %>% # 크기 변화 상쇄용
diff() %>% # 시간간갸ㅕㄱ 차분하여 주기에 따른 변화 상쇄
auto.arima() %>%
tsdiag()
AirPassengers %>%
arima(order = c(2,1,1), list(order = c(0,1,0), period = 12)) %>%
predict(n.ahead = 24)
AirPassengers %>%
arima(order = c(2,1,1), list(order = c(0,1,0), period = 12)) %>%
predict(n.ahead = 24) -> forecast_Air
U <- forecast_Air$pred + 2*forecast_Air$se
L <- forecast_Air$pred - 2*forecast_Air$se
AirPassengers %>%
ts.plot(forecast_Air$pred,
forecast_Air$pred + 2*forecast_Air$se,
forecast_Air$pred - 2*forecast_Air$se,
col = c(1,2,4,4),
lty = c(1,1,2,2))
legend("topleft",
c("Actual", "Forecast", "Error Bounds (95% Confidence)", col = c(1,2,4), lty = c(1,1,2)))
AirPassengers %>%
ts.plot(forecast_Air$pred,
forecast_Air$pred + 2*forecast_Air$se,
forecast_Air$pred - 2*forecast_Air$se,
col = c(1,2,4,4),
lty = c(1,1,2,2))
legend("topleft",
c("Actual", "Forecast", "Error Bounds (95% Confidence)", col = c(1,2,4), lty = c(1,1,2)))
AirPassengers %>%
ts.plot(forecast_Air$pred,
forecast_Air$pred + 2*forecast_Air$se,
forecast_Air$pred - 2*forecast_Air$se,
col = c(1,2,4,4),
lty = c(1,1,2,2))
legend("topleft",
c("Actual", "Forecast", "Error Bounds (95% Confidence)"), col = c(1,2,4), lty = c(1,1,2)))
legend("topleft",
c("Actual", "Forecast", "Error Bounds (95% Confidence)"), col = c(1,2,4), lty = c(1,1,2))
AirPassengers %>%
arima(order = c(2,1,1), list(order = c(0,1,0), period = 12)) %>%
predict(n.ahead = 24) -> forecast_Air
forecast_Air
AirPassengers %>%
ts(frequency = 12) %>%
decompose() %>%
plot()
AirPassengers %>%
stl(s.window = "periodic") %>%
plot()
AirPassengers %>%
log() %>% # 크기 변화 상쇄용
diff() %>% # 시간간격을 차분하여 주기에 따른 변화 상쇄
adf.test(alternative = "stationary", k=0)
AirPassengers %>%
log() %>% # 크기 변화 상쇄용
diff() %>% # 시간간갸ㅕㄱ 차분하여 주기에 따른 변화 상쇄
auto.arima() %>% # 자동으로 아리마분석
tsdiag() # 그림그려주기
AirPassengers %>%
as_tsibble() %>%
ggplot(aes(x = index, y = value)) +
geom_line(aes(col = index))
AirPassengers %>%
decompose() -> AirPassengers_decompose
AirPassengers_decompose_adj <- AirPassengers - AirPassengers_decompose$seasonal
plot(AirPassengers_decompose_adj)
?ts.plot
AirPassengers %>%
ts.plot(forecast_Air$pred, #
forecast_Air$pred + 2*forecast_Air$se,
forecast_Air$pred - 2*forecast_Air$se,
col = c(1,2,4,4),
lty = c(1,1,2,2))
AirPassengers %>%
ts.plot(forecast_Air$pred, #
forecast_Air$pred + 2*forecast_Air$se,
forecast_Air$pred - 2*forecast_Air$se,
col = c(1,2,4,4),
lty = c(1,1,2,2),
xlab="year", ylab="counts")
legend("topleft",
c("Actual", "Forecast", "Error Bounds (95% Confidence)"),
col = c(1,2,4), lty = c(1,1,2))
?ts.plot
forecast_Air
AirPassengers %>%
log() %>% # 크기 변화 상쇄용
diff() %>% # 시간간갸ㅕㄱ 차분하여 주기에 따른 변화 상쇄
auto.arima()
AirPassengers %>%
log() %>% # 크기 변화 상쇄용
diff() %>% # 시간간갸ㅕㄱ 차분하여 주기에 따른 변화 상쇄
auto.arima() %>% # 자동으로 아리마분석
tsdiag() # 그림그려주기
pacman::p_load(tidyverse, magrittr, # helper packages
tsibble, # modeling packages
ggfortify, changepoint, strucchange, ggpmisc)
Nile
Nile %>%
auto.arima
Nile %>%
auto.arima %>%
forecast()
Nile %>%
auto.arima %>%
forecast() %>%
plot()
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, magrittr, # helper packages
sna # modeling packages
)
rbind(
c(0,1,1,1,0),
c(1,0,0,0,0),
c(1,0,0,0,0),
c(1,1,0,0,1),
c(0,0,0,1,0)
) -> amatrix
sna::gden(amatrix)
degree(amatrix, gmode = "graph")
closeness(amatrix, gmode = "graph")
betweenness(amatrix, gmode = "graph")
gplot(amatrix)
gplot(amatrix, mode = "circle")
plot.sociomatrix(amatrix)
library(KoNLP)
install.packages("rJava")
install.packages(c("stringr", "hash", "tau", "Sejong", "RSQLite", "devtools"), type = "binary")
install.packages(c("stringr", "hash", "tau", "Sejong", "RSQLite", "devtools"), type = "binary")
install.packages("tm")
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
install.packages("multilinguer")
install.packages("multilinguer")
multilinguer::install_jdk()
multilinguer::install_jdk()
install.packages("KoNLP",
repos = c("https://forkonlp.r-universe.dev",
"https://cloud.r-project.org"),
INSTALL_opts = c("--no-multiarch")
)
library(KoNLP)
install.packages("wordcloud")
install.packages("tm")
library(KoNLP)
library(KoNLP)
installed.packages("memoise")
installed.packages("memoise")
library('rJava')
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
install.packages("multilinguer")
install.packages("multilinguer")
multilinguer::install_jdk()
rJava::.jinit()
library(KoNLP)
library(KoNLP)
install.packages("rJava")
install.packages("KoNLP",
repos = c("https://forkonlp.r-universe.dev",
"https://cloud.r-project.org"),
INSTALL_opts = c("--no-multiarch")
)
multilinguer::install_jdk()
rJava::.jinit()
rJava::.jinit()
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
install.packages("multilinguer")
install.packages("multilinguer")
installed.packages("memoise")
library(KoNLP)
install.packages("rJava")
install.packages(c("stringr", "hash", "tau", "Sejong", "RSQLite", "devtools"), type = "binary")
install.packages(c("stringr", "hash", "tau", "Sejong", "RSQLite", "devtools"), type = "binary")
library('KoNLP')
remotes::install_github('haven-jeon/KoNLP', upgrade = "never", INSTALL_opts=c("--no-multiarch"))
remotes::install_github('haven-jeon/KoNLP', upgrade = "never", INSTALL_opts=c("--no-multiarch"))
Sys.which("make")
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
install.packages("KoNLP",
repos = c("https://forkonlp.r-universe.dev",
"https://cloud.r-project.org"),
INSTALL_opts = c("--no-multiarch")
)
library('rJava')
library('memoise')
library('KoNLP')
dyn.load()
dyn.load(paste0(system2("/usr/libexec/java_home",stdout=T),
"/jre/lib/server/libjvm.dylib"))
dir(paste0(system2('/usr/libexec/java_home', stdout = TRUE)))
dir(paste0(system2('/usr/libexec/java_home', stdout = TRUE)))
dyn.load(paste0(system2('/usr/libexec/java_home', stdout = TRUE), '/jre/lib/server/libjvm.dylib'))
install.packages("KoNLP")
library(KoNLP)
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
dyn.load('/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre/lib/server/libjvm.dylib')
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
library('rJava')
library('memoise')
library('KoNLP')
multilinguer::install_jdk()
rJava::.jinit()
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
install.packages("rJava", configure.args="--disable-jri"))
install.packages("rJava", configure.args="--disable-jri")
library('rJava')
Sys.getenv("JAVA_HOME")
Sys.setenv(JAVA_HOME = '/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home')
dyn.load('/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home/lib/server/libjvm.dylib')
Sys.getenv("JAVA_HOME")
library(rJava)
library(rJava)
Sys.getenv("JAVA_HOME")
library(rJava)
# https://www.java.com/ko/download/ 자바 설치
install.packages("rJava")
rJava::.jinit()
Sys.getenv("DYLD_FALLBACK_LIBRARY_PATH")
FilePath rLdScriptPath = options.scriptsPath().complete("session/r-ldpath");
FilePath supportingFilePath = options.supportingFilePath()
library(rJava)
dyn.load('/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/lib/server/libjvm.dylib')
dyn.load('/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/jre/lib/server/libjvm.dylib')
'/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/jre/lib/server/libjvm.dylib'
dyn.load('/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/jre/lib/server/libjvm.dylib')
Sys.getenv("JAVA_HOME")
Sys.setenv(JAVA_HOME = '/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/jre')
dyn.load('/Library/Java/JavaVirtualMachines/jdk1.8.0_291.jdk/Contents/Home/jre/lib/server/libjvm.dylib')
Sys.getenv("JAVA_HOME")
library(rJava)
library(KoNLP)
remove.packsges("rJava")
remove.packages("rJava")
remove.packages("rJava")
install.packages("rJava")
Sys.getenv("JAVA_HOME")
library(rJava)
Sys.getenv("JAVA_HOME")
library(rJava)
multilinguer::install_jdk()
> library(multilinguer)
library(multilinguer)
multilinguer::install_jdk()
install.packages(c("hash", "tau", "Sejong", "RSQLite", "devtools", "bit", "rex", "lazyeval", "htmlwidgets", "crosstalk", "promises", "later", "sessioninfo", "xopen", "bit64", "blob", "DBI", "memoise", "plogr", "covr", "DT", "rcmdcheck", "rversions"), type = "binary")
install.packages(c("hash", "tau", "Sejong", "RSQLite", "devtools", "bit", "rex", "lazyeval", "htmlwidgets", "crosstalk", "promises", "later", "sessioninfo", "xopen", "bit64", "blob", "DBI", "memoise", "plogr", "covr", "DT", "rcmdcheck", "rversions"), type = "binary")
library(KoNLP)
library('rJava')
library("rcdk")
install.packages("rcdk")
library("rcdk")
library(rJava)
library(rJava)
library('KoNLP')
library('KoNLP')
library('KoNLP')
library('KoNLP')
useSejongDic()
extractNoun("롯데마트가 판매하고 있는 흑마늘 양념 치킨이 논란이 되고 있다.")
SimplePos09("롯데마트가 판매하고 있는 흑마늘 양념 치킨이 논란이 되고 있다.")
SimplePos22("롯데마트가 판매하고 있는 흑마늘 양념 치킨이 논란이 되고 있다.")
library(KoNLP)
>>>>>>> 1e2657beaa49e3923c3a82d7738bacb6e43da1c5
